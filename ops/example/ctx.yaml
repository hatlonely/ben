name: ben-example

ctx:
  sh:
    type: shell

seed:
  seed1:
    type: file
    args:
      name: seed.json
  seed2:
    type: dict
    args:
      kvs:
        - key1: val11
          key2: val21
        - key1: val12
          key2: val22

plan:
  - name: ben1
    stop:
      seconds: 0
      times: 1000
    unit:
      - parallel: 10
        qps: 100
        seed:
          req: seed1
        step:
          - ctx: sh
            req:
              command: echo -n ${KEY1} ${KEY2}
              envs:
                "#KEY1": seed["req"]["key1"]
                "#KEY2": seed["req"]["key2"]
            res:
              "#groupby": res["exitCode"]
              success: 0
